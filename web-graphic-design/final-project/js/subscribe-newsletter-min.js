document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".subscribe-newsletter").forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault(),e.target.querySelector("[name=submit]").setAttribute("disabled","disabled"),e.target.style.setProperty("--z-index","1"),e.target.classList.remove("received"),e.target.classList.add("sending");const t=new FormData(e.target);t.append("fetch","true"),fetch(e.target.action,{method:"POST",body:t}).then((e=>e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText}))).then((t=>{"Success"==t.status?(e.target.classList.remove("sending"),e.target.classList.add("received"),e.target.querySelector("label:not([for])").classList.remove("subscribe-newsletter-message-error"),e.target.querySelector("label:not([for])").classList.add("subscribe-newsletter-message-success"),e.target.innerHTML=t.message):(e.target.style.setProperty("--z-index","-1"),e.target.querySelector("[name=submit]").removeAttribute("disabled"),e.target.querySelector("[name=email]").focus(),e.target.querySelector("label:not([for])").classList.add("subscribe-newsletter-message-error"),e.target.querySelector("label:not([for])").textContent=t.message)})).catch((t=>{e.target.querySelector("label:not([for])").innerHTML=`<span>${t.status}<span> - ${t.statusText}`}))}))}))}));